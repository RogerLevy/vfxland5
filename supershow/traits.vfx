require %idir%/checks.vfx

trait: %object
    :: init ( - ) ;
trait;

trait: %loadable
    :: load ( - ) ;
trait;

trait: %unloadable
    :: unload ( - ) ;
trait;

trait: %saveable
    redef :: save ( - ) stub ;
    :: saveas ( path len ) stub ;
trait;

trait: %usable
    :: use ( - ) ;
trait;

trait: %drawable
    :: draw ( - ) ;
trait;

defer _ndraw  \ had to do the recursion this way because [: RECURSE ;] didn't work.
: ndraw ( drawable-iterable - )
    \ dup .summary cr
    dup draw ['] _ndraw swap each ;
' ndraw is _ndraw

trait: %dimensional
    prop w :int
    prop h :int

    :: dims ( - w h ) w 2@ ;
trait;

trait: %poolable
    prop pool :ref %lifo
trait;

trait: %xy
    prop x :fixed <save
    prop y :fixed <save
trait;

trait: %_bitmap 
    prop bmp :int <save
trait;